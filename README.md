# Сервис обработки скриншотов ИНСАЙДЕР

Сервис для автоматического сбора, обработки и анализа текстовой информации со скриншотов рабочих компьютеров сотрудников из системы ИНСАЙДЕР.

## Функциональность

- Автоматический сбор скриншотов из системы ИНСАЙДЕР
- Распознавание текста с помощью EasyOCR
- Обработка и нормализация текста с помощью Natasha
- Сохранение результатов в базу данных SQLite
- Автоматическая синхронизация данных
- Очистка устаревших данных
- Логирование всех операций

## Требования

- Python 3.11+
- pip
- SQLite3

## Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd <repository-name>
```

2. Создайте виртуальное окружение:
```bash
python -m venv venv
```

3. Активируйте виртуальное окружение:
- Windows:
```bash
venv\Scripts\activate
```
- Linux/MacOS:
```bash
source venv/bin/activate
```

4. Установите зависимости:
```bash
pip install -r requirements.txt
```

5. Создайте файл .env в корневой директории проекта:
```env
INSIDER_API_URL=URL
INSIDER_API_KEY=API_KEY
DATABASE_URL=sqlite:///screenshots.db
BATCH_SIZE=20
SCHEDULE_INTERVAL=60
LOG_LEVEL=INFO
TEMP_DIR=temp
```

## Запуск

1. Активируйте виртуальное окружение (если еще не активировано)

2. Запустите сервис:
```bash
python main.py
```

Сервис начнет работу и будет:
- Синхронизировать список сотрудников
- Собирать и обрабатывать скриншоты
- Сохранять результаты в базу данных
- Очищать устаревшие данные

## Структура проекта

- `main.py` - основной файл приложения
- `config.py` - конфигурация приложения
- `models.py` - модели базы данных
- `insider_service.py` - сервис для работы с API ИНСАЙДЕР
- `image_processor.py` - сервис для обработки изображений
- `requirements.txt` - зависимости проекта
- `.env` - файл с переменными окружения
- `temp/` - директория для временных файлов
- `screenshots.db` - база данных SQLite

## Логирование

Логи сохраняются в файл `app.log` в корневой директории проекта. Уровень логирования можно настроить в файле `.env`.
- `screenshot_processor.log` - все ошибки, возникающие в процессе работы программы, должны фиксироваться в лог-файле

## База данных

База данных SQLite создается автоматически при первом запуске. Структура базы данных:
- Таблица `employees` - информация о сотрудниках
- Таблица `screenshots` - информация о скриншотах и распознанном тексте